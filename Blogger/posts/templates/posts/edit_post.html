{% extends 'main/base.html' %}
{% load i18n %}

{% block title %}{% trans "Edit Post" %}{% endblock %}

{% block content %}

<div class="bg-white dark:bg-brgandy/20 shadow-lg rounded-xl p-8 space-y-6 transition">

  <h1 class="text-3xl font-bold text-brgandy dark:text-beige mb-4">
    {% trans "Edit Post" %}
  </h1>

  <form method="POST" enctype="multipart/form-data" class="space-y-6">
    {% csrf_token %}

    <!-- Title -->
    <div>
      <label class="block mb-2 font-semibold text-brgandy dark:text-beige">{% trans "Title" %}</label>
      <input name="title" value="{{ post.title }}" required
        class="w-full p-3 rounded-xl bg-beige dark:bg-brgandy/40 border border-brgandy/20 focus:ring-2 focus:ring-lightred outline-none transition">
    </div>

    <!-- Content -->
    <div>
      <label class="block mb-2 font-semibold text-brgandy dark:text-beige">{% trans "Content" %}</label>
      <textarea name="content" rows="5" required
        class="w-full p-3 rounded-xl bg-beige dark:bg-brgandy/40 border border-brgandy/20 focus:ring-2 focus:ring-lightred outline-none transition">{{ post.content }}</textarea>
    </div>

    <!-- Current image -->
    {% if post.image %}
      <img src="{{ post.image.url }}" class="w-full rounded-xl shadow hover:scale-[1.01] transition">
    {% endif %}

    <!-- Upload new -->
    <div>
      <label class="block mb-2 font-semibold text-brgandy dark:text-beige">{% trans "Replace Image" %}</label>
      <input type="file" name="image"
        class="block w-full bg-beige dark:bg-brgandy/40 rounded-xl p-2 border border-brgandy/20 cursor-pointer" />
    </div>

    <button
      class="w-full py-3 bg-brgandy text-white rounded-xl font-semibold hover:bg-lightred transition-all duration-300 shadow">
      {% trans "Save Changes" %}
    </button>
    <!-- Alerts -->
{% if messages %}
<div class="mt-6 space-y-3">
  {% for message in messages %}
  <div class="flex items-center gap-3 rounded-xl bg-green-100/40 dark:bg-green-900/40 
              border border-green-300 dark:border-green-700 backdrop-blur-xl px-4 py-3 
              text-green-900 dark:text-green-300 shadow-sm animate-fadeIn">

    <svg class="w-5 h-5 text-green-700 dark:text-green-300" fill="none" stroke="currentColor" stroke-width="2"
      viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
    </svg>

    <span class="text-sm font-medium">{{ message }}</span>
  </div>
  {% endfor %}
</div>
{% endif %}
  </form>

</div>
{% endblock %}
